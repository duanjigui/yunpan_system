$(function(){
	var messagTip=(function(){
			//构造html代码
			var $message_box_warpper=$("<div id='message_box_warpper'></div>")
			var $message_box= $("<div id='message_box'></div>")
			var $header= $(" <div class='header'><span class='title'>上传文件中</span><span class='toolbar'><i class='min_window'>-</i><i class='close'>x</i></span></div>")
			var $body=$("<div class='body'></div>")
			var $files_title= $("<div class='files_title'><span class='files_name'>文件名</span><span class='files_size'>大小</span><span class='files_direcory'>上传目录</span><span class='files_status'>状态</span><span class='files_operation'>操作</span></div>")
			var $fileslist =$("<div class='fileslist'></div>")
			$message_box_warpper.append($message_box)
			$message_box.append($header)
			$message_box.append($body)
			$body.append($files_title)
			$body.append($fileslist)
			$("body").append($message_box_warpper)
			var TT={
				setTitle:function(title){
					$("#message_box .header span.title").text(title)
				},
				openMessage:function(){
					$("#message_box .header i.min_window").text("-")
					$("#message_box").animate({
						bottom: "0px",
					},600)
				},
				addMessage:function(obj){
					if(obj != null && obj.length>0){
						for(var i=0;i<obj.length;i++){
							var $row=$("<div class='row' fileId='"+obj[i].files_id+"'><span class='files_name'>"+obj[i].files_name+"</span><span class='files_size'>"+obj[i].files_size+"</span><span class='files_direcory'>"+obj[i].files_direcory+"</span><span class='files_status'>"+obj[i].files_status+"</span><span class='files_operation'>"+obj[i].files_operation+"</span></div>")
							$fileslist.append($row)
						}
					}
				},
				//删除某条记录
				removeMessage:function(file_id){
					$("#message_box .body .fileslist .row[fileId='"+file_id+"']").detach()
				},
				updateMessage:function(file_id,field,value){
					var $row= $("#message_box").find(".body .fileslist .row[fileId='"+file_id+"']")
					$row.find("span."+field).text(value)
				},
				changeColor:function(file_id,field,color){
					var $row= $("#message_box").find(".body .fileslist .row[fileId='"+file_id+"']")
					$row.find("span."+field).css("color",color)
				}
			}
				
			$("#message_box .header i.min_window").click(function(){
				var value= $(this).text()
				if (value=="-"){
					$("#message_box").animate({
						bottom: "-392px",
					},600,function(){
						$("#message_box .header i.min_window").text("口")
					})
				}else{
					$("#message_box").animate({
						bottom: "0px",
					},600,function(){
						$("#message_box .header i.min_window").text("-")
					})
					
				}
				
			})
			$("#message_box .header i.close").click(function(){
				$("#message_box").css("bottom","-430px")
			})
				return TT;
			})()
			
	window.messagTip=messagTip;
	
})

